{"createdAt":"2025-09-07T01:22:25.461Z","updatedAt":"2025-10-17T00:32:15.793Z","id":"01zCvIsWPAFFMGcr","name":"FluxoAdminDelivery","active":false,"isArchived":false,"nodes":[{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"059b3d30-905f-4038-b8c1-9582bae19867","leftValue":"={{ $json.user_id }}","rightValue":"","operator":{"type":"number","operation":"exists","singleValue":true}},{"id":"91d4813d-55f8-40af-a588-cc77a7b30153","leftValue":"={{ $('Usuario').item.json.password }}","rightValue":"={{ $json.senha }}","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[384,-64],"id":"d154ad91-1c95-4db3-a735-f22bf07509a7","name":"If"},{"parameters":{"jsCode":"return [{ json: { success: true, message: 'usuario ok' } }];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[704,-192],"id":"1cf72dfa-2fac-4319-98c2-4692c7b84826","name":"Sim"},{"parameters":{"jsCode":"  return [{ json: { success: false, message: 'usuario invalido' } }];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[688,80],"id":"ceabe7ca-5cda-420d-b163-7549a161deec","name":"Não"},{"parameters":{},"type":"n8n-nodes-base.merge","typeVersion":3.2,"position":[1008,-80],"id":"fd11d75c-1029-4d5a-bb4e-de7ea2a38b11","name":"Merge"},{"parameters":{"options":{"responseCode":200}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.4,"position":[1552,-80],"id":"a9a42856-dc26-47b8-963c-908d656c6da1","name":"Respond to Webhook"},{"parameters":{"assignments":{"assignments":[{"id":"807e4143-d55c-420c-b026-90bb242e057f","name":"email","value":"=1","type":"string"},{"id":"f3078e1c-88ef-46e0-8681-76c60898ac50","name":"password","value":"=1","type":"string"},{"id":"4616a119-9b3f-4dcd-b548-0be8d5f7a3b4","name":"id_empresa","value":"=1","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[2400,16],"id":"ed931070-5757-4d6e-8bd7-d7850ef0f2eb","name":"Edit Fields1"},{"parameters":{"respondWith":"allIncomingItems","options":{"responseCode":200}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.4,"position":[288,256],"id":"2011ef96-3ad7-46da-b316-013d0380dab8","name":"Respond to Webhook1"},{"parameters":{"respondWith":"allIncomingItems","options":{"responseCode":200}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.4,"position":[240,512],"id":"82f3afeb-d887-4126-96bc-0e6eaac24bff","name":"Respond to Webhook3"},{"parameters":{"rules":{"values":[{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"leftValue":"={{ $json.status }}","rightValue":"producao","operator":{"type":"string","operation":"equals"},"id":"590570b6-6ad3-4a8a-85aa-73a7103414b3"}],"combinator":"and"},"renameOutput":true,"outputKey":"producao"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"f7507cac-1ca9-4cdb-a214-6ec63aac31a0","leftValue":"={{ $json.status }}","rightValue":"entrega","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"entrega"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"fc846c07-c37d-4e5b-9631-c28bd8982938","leftValue":"={{ $json.status }}","rightValue":"recebido","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"recebido"}]},"options":{}},"type":"n8n-nodes-base.switch","typeVersion":3.2,"position":[144,816],"id":"f19dd725-241b-43a9-a1d7-80cebbf96323","name":"Switch1"},{"parameters":{"assignments":{"assignments":[{"id":"f1e0b7ac-d8c4-4845-a161-71db934c6ff9","name":"status","value":"=producao","type":"string"},{"id":"5f919bd7-55dd-4cb7-a1ee-24a7887c6e45","name":"acao","value":"produção","type":"string"},{"id":"0d734ebf-2a01-40f5-8919-9ccf528ec154","name":"pedido_id","value":"={{ $json.pedido_id }}","type":"string"},{"id":"58b19555-5733-45d2-8ca5-d349c32cb814","name":"id_empresa","value":"={{ $json.id_empresa }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[464,1008],"id":"21186130-0259-434f-84dd-bdc5cf387b92","name":"Edit Fields2"},{"parameters":{"assignments":{"assignments":[{"id":"f1e0b7ac-d8c4-4845-a161-71db934c6ff9","name":"status","value":"=entrega","type":"string"},{"id":"79fcdf15-1b17-487f-bf64-6c557812da36","name":"acao","value":"entrega","type":"string"},{"id":"72a89c5a-9e0d-419b-b62d-42fdcb0a8cc4","name":"pedido_id","value":"={{ $json.pedido_id }}","type":"number"},{"id":"9bedb884-1fc4-49aa-afcd-771818c93b81","name":"id_empresa","value":"={{ $json.id_empresa }}","type":"number"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[464,656],"id":"33a2a192-6b4a-4621-bcf8-cb3126eb4cf3","name":"Edit Fields3"},{"parameters":{"assignments":{"assignments":[{"id":"f1e0b7ac-d8c4-4845-a161-71db934c6ff9","name":"status","value":"=concluido","type":"string"},{"id":"c1877cbe-998c-4bdc-a539-5699a76293db","name":"acao","value":"concluido","type":"string"},{"id":"98c074db-8d52-4aa0-816c-889b310d08c8","name":"pedido_id","value":"={{ $json.pedido_id }}","type":"string"},{"id":"9167bd3c-dba7-4efc-a063-18d9eb2695fd","name":"id_empresa","value":"={{ $json.id_empresa }}","type":"number"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[464,832],"id":"e796c14b-c30a-4487-9be8-1648ee4cc1e7","name":"Edit Fields4"},{"parameters":{"numberInputs":3},"type":"n8n-nodes-base.merge","typeVersion":3.2,"position":[848,816],"id":"165e1dd4-d0f7-46f4-8abf-9d57fe056adc","name":"Merge2","alwaysOutputData":false},{"parameters":{"respondWith":"allIncomingItems","options":{"responseCode":200}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.4,"position":[1376,832],"id":"7f161fd3-9e14-428a-b06b-6a1ce9496beb","name":"Respond to Webhook4"},{"parameters":{"respondWith":"allIncomingItems","options":{"responseCode":200}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.4,"position":[160,1120],"id":"1de3f08d-b808-4f93-a65a-046e4c930542","name":"Respond to Webhook5"},{"parameters":{"operation":"executeQuery","query":"   SELECT\n  p.pedido_id,\n  p.status,\n  u.nome,\n  p.valor,\n  p.create_at\nFROM public.pedidos AS p\nJOIN public.usuario AS u\n  ON u.user_id = p.user_id\nWHERE p.create_at >= date_trunc('day', now())\n  AND p.create_at <  date_trunc('day', now()) + interval '1 day' and p.status <> 'cancelado' \nAND p.id_empresa = u.id_empresa AND p.id_empresa =  {{ $json.id_empresa }}\nORDER BY p.create_at,p.pedido_id;","options":{}},"type":"n8n-nodes-base.postgres","typeVersion":2.6,"position":[96,256],"id":"38b05d81-868f-4f34-bf8b-84713800e01a","name":"GetPedido","credentials":{"postgres":{"id":"3NLaVyXonSrCcLE3","name":"Postgres account"}}},{"parameters":{"operation":"executeQuery","query":" select * from pedido_detalhado ({{ $json.pedido_id }},{{ $json.id_empresa }})\n ","options":{}},"type":"n8n-nodes-base.postgres","typeVersion":2.6,"position":[64,512],"id":"6f2e6810-4402-4017-89d1-046009c73d79","name":"Resumo_Endereco","credentials":{"postgres":{"id":"3NLaVyXonSrCcLE3","name":"Postgres account"}}},{"parameters":{"operation":"executeQuery","query":" SELECT pedido_id, user_id,   status, id_empresa\nFROM pedidos\nWHERE   pedido_id =   {{ $json.body.numero }} and id_empresa =  {{ $json.body.id_empresa}}\n\nLIMIT 1;","options":{}},"type":"n8n-nodes-base.postgres","typeVersion":2.6,"position":[-80,832],"id":"1b642d70-4e2a-49a8-b851-c256cbc40e82","name":"PendidoAvancar2","credentials":{"postgres":{"id":"3NLaVyXonSrCcLE3","name":"Postgres account"}}},{"parameters":{"operation":"executeQuery","query":"update  \n  pedidos\n  set status = 'cancelado'\nWHERE   pedido_id =  {{ $json.body.numero }}   and  id_empresa = {{ $json.body.id_empresa}} \n;","options":{}},"type":"n8n-nodes-base.postgres","typeVersion":2.6,"position":[-64,1120],"id":"1a1e0d14-122c-4ed7-bec1-cd3ae45171f5","name":"CancelaPedido","credentials":{"postgres":{"id":"3NLaVyXonSrCcLE3","name":"Postgres account"}}},{"parameters":{"operation":"executeQuery","query":"update  \n  pedidos\n  set status = '{{ $json.status }}'\nWHERE   pedido_id = {{ $json.pedido_id }}   and  id_empresa = {{ $json.id_empresa }} \n;","options":{}},"type":"n8n-nodes-base.postgres","typeVersion":2.6,"position":[1072,832],"id":"fadf8ffe-a988-43c7-b903-8636590a761c","name":"Avanca","credentials":{"postgres":{"id":"3NLaVyXonSrCcLE3","name":"Postgres account"}}},{"parameters":{"assignments":{"assignments":[{"id":"807e4143-d55c-420c-b026-90bb242e057f","name":"email","value":"={{ $json.body.email }}","type":"string"},{"id":"f3078e1c-88ef-46e0-8681-76c60898ac50","name":"password","value":"={{ $json.body.password }}","type":"string"},{"id":"f936a6e8-77e3-46f8-a272-cd2b884e2dfd","name":"empresa_id","value":"1","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-128,-64],"id":"6c09a47a-f603-49ae-a988-03c2803ee43f","name":"Usuario"},{"parameters":{"operation":"get","tableId":"usuario","filters":{"conditions":[{"keyName":"email","keyValue":"={{$json.email}}"},{"keyName":"senha","keyValue":"={{ $json.password }}"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[112,-64],"id":"37a8a35c-7ef5-47bf-b7d3-e31aa6730004","name":"DadosUsuario","credentials":{"supabaseApi":{"id":"CcvRddDPb5xelxfb","name":"Supabase account"}}},{"parameters":{"operation":"executeQuery","query":"SELECT \n  u.user_id,\n  u.email,\n  e.id_empresa AS id_empresa,\n  e.nome AS nome_empresa,\n  e.saudacao, cnpj,\n  u.tipo_admim tipo_admin\nFROM usuario u\nJOIN empresas e ON e.id_empresa = u.id_empresa\nWHERE u.email = '{{ $('DadosUsuario').item.json.email }}' AND u.senha = '{{ $('DadosUsuario').item.json.senha }}';","options":{}},"type":"n8n-nodes-base.postgres","typeVersion":2.6,"position":[1280,-80],"id":"107e5f9a-45d4-49fc-b0c8-610ad2073874","name":"DadosEmpresa","credentials":{"postgres":{"id":"3NLaVyXonSrCcLE3","name":"Postgres account"}}},{"parameters":{"assignments":{"assignments":[{"id":"807e4143-d55c-420c-b026-90bb242e057f","name":"email","value":"={{ $json.body.email }}","type":"string"},{"id":"f3078e1c-88ef-46e0-8681-76c60898ac50","name":"password","value":"={{ $json.body.password }}","type":"string"},{"id":"4616a119-9b3f-4dcd-b548-0be8d5f7a3b4","name":"id_empresa","value":"={{ $json.query.id_empresa}}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-144,256],"id":"68940d9a-aa6c-4e95-824e-7684dbaf6d0d","name":"Edit Fields"},{"parameters":{"jsCode":" return items.map(item => {\n  const dados = item.json;\n  return {\n    json: {\n      numero: dados.numero,\n      nome: dados.nome,\n      descricao: dados.descricao,\n      categoria: dados.categoria,\n      preco_pequena: dados.tamanhos?.find(t => t.nome === 'P')?.preco || 0,\n      preco_medio: dados.tamanhos?.find(t => t.nome === 'M')?.preco || dados.preco_medio || 0,\n      preco_grande: dados.tamanhos?.find(t => t.nome === 'G')?.preco || dados.preco_grande || 0,\n      imagem: dados.imagem || null\n    }\n  };\n});\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[528,-384],"id":"029d44d0-e4a4-47cf-a930-176344b1afdd","name":"cardapio3"},{"parameters":{"operation":"executeQuery","query":"   select * from cardapio where id_empresa =\n   {{ $json.id_empresa }}  order by numero , tipo desc ;","options":{}},"type":"n8n-nodes-base.postgres","typeVersion":2.6,"position":[256,-384],"id":"1f4a9995-ace0-4b0d-985e-75b73c230c57","name":"Cardapio","credentials":{"postgres":{"id":"3NLaVyXonSrCcLE3","name":"Postgres account"}}},{"parameters":{"assignments":{"assignments":[{"id":"4616a119-9b3f-4dcd-b548-0be8d5f7a3b4","name":"id_empresa","value":"={{ $json.query.id_empresa}}","type":"number"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-64,-384],"id":"cedbedc6-5397-489c-a784-0935c62abf2b","name":"Edit Fields5"},{"parameters":{"respondWith":"allIncomingItems","options":{"responseCode":200}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.4,"position":[848,-384],"id":"2fa826d1-154a-41e5-bcb7-27d158176631","name":"Respond to Webhook2"},{"parameters":{"jsCode":" return items.map(item => {\n  const dados = item.json;\n\n  return {\n    json: {\n      numero: dados.id || dados.numero || null,\n      id_empresa: dados.id_empresa || 1, // ajuste se quiser dinamizar\n      nome: dados.nome || \"\",\n      descricao: dados.descricao || \"\",\n      tipo: dados.tipo || \"\",\n      categoria: dados.categoria || \"\",\n      id_referencia:dados.id_referencia|| \"\",\n      \n      preco_pequena: dados.tamanhos?.find(t => t.nome === 'P')?.preco || dados.preco_pequena || 0,\n      preco_medio: dados.tamanhos?.find(t => t.nome === 'M')?.preco || dados.preco_medio || 0,\n      preco_grande: dados.tamanhos?.find(t => t.nome === 'G')?.preco || dados.preco_grande || 0,\n      disponivel: dados.disponivel === true || dados.disponivel === \"true\" ? true : false,\n      palavras_chav: dados.palavras_chav || \"\",\n      volume: dados.volume || \"\",\n      codigo: dados.codigo || \"\",\n      imagem: dados.imagem || \"\"\n    }\n  };\n});\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[400,-704],"id":"5ef29b1d-5d2b-4260-b9c6-29105223cb34","name":"cardapio"},{"parameters":{"operation":"executeQuery","query":"   select * from cardapio where id_empresa =\n   {{ $json.id_empresa }} and numero = {{ $json.numero }} order by numero , tipo desc ;","options":{}},"type":"n8n-nodes-base.postgres","typeVersion":2.6,"position":[128,-704],"id":"ad2c857e-be5b-408e-ac65-fcdf2fcc86eb","name":"Cardapio1","credentials":{"postgres":{"id":"3NLaVyXonSrCcLE3","name":"Postgres account"}}},{"parameters":{"respondWith":"allIncomingItems","options":{"responseCode":200}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.4,"position":[720,-704],"id":"55d6807a-1c41-41d2-9761-659eb2d430ba","name":"Respond to Webhook6"},{"parameters":{"assignments":{"assignments":[{"id":"4616a119-9b3f-4dcd-b548-0be8d5f7a3b4","name":"id_empresa","value":"={{ $json.query.id_empresa}}","type":"number"},{"id":"a58c4ce7-e2c3-436f-a30a-7eda42ddd096","name":"numero","value":"={{ $json.query.numero}}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-192,-704],"id":"8d1073e4-f213-4b92-9c48-f5f5f142c5bd","name":"Edit Fields7"},{"parameters":{"jsCode":" return items.map(item => {\n  const dados = item.json;\n  return {\n    json: {\n      numero: dados.id,\n      nome: dados.nome,\n      descricao: dados.descricao,\n      categoria: dados.categoria,\n      id_referencia:dados.id_referencia,\n      preco_pequena: dados.tamanhos?.find(t => t.nome === 'P')?.preco || 0,\n      preco_medio: dados.tamanhos?.find(t => t.nome === 'M')?.preco || dados.preco_medio || 0,\n      preco_grande: dados.tamanhos?.find(t => t.nome === 'G')?.preco || dados.preco_grande || 0,\n      imagem: dados.imagem || null\n    }\n  };\n});\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[432,-1008],"id":"127b2e56-c309-4ad3-bd2f-65115d7c0ef7","name":"cardapio1"},{"parameters":{"operation":"executeQuery","query":" UPDATE cardapio\nSET\n  nome = '{{ $json.body.nome }}',\n  descricao = '{{ $json.body.descricao }}',\n  tipo = '{{ $json.body.tipo }}',\n  categoria = '{{ $json.body.categoria }}',\n  preco_pequena = {{ $json.body.preco_pequena }},\n  preco_medio = {{ $json.body.preco_medio }},\n  preco_grande = {{ $json.body.preco_grande }},\n  disponivel = {{ $json.body.disponivel }},\n  palavras_chave = '{{ $json.body.palavras_chav }}',\n  volume = '{{ $json.body.volume }}',\n  codigo = '{{ $json.body.codigo }}',\n  imagem = '{{ $json.body.imagem }}',\n  id_referencia  = {{ $json.body.id_referencia }}\nWHERE\n  numero = {{ $json.body.numero }}\n  AND id_empresa = {{ $json.body.id_empresa }};\n","options":{}},"type":"n8n-nodes-base.postgres","typeVersion":2.6,"position":[160,-1008],"id":"99a8b000-e055-4493-81f5-a1d10029d0b6","name":"Cardapio2","credentials":{"postgres":{"id":"3NLaVyXonSrCcLE3","name":"Postgres account"}}},{"parameters":{"respondWith":"allIncomingItems","options":{"responseCode":200}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.4,"position":[752,-1008],"id":"aacc9454-1048-4a1e-b726-0b5f66c456e0","name":"Respond to Webhook7"},{"parameters":{"assignments":{"assignments":[{"id":"4616a119-9b3f-4dcd-b548-0be8d5f7a3b4","name":"id_empresa","value":"={{ $json.query.id_empresa}}","type":"number"},{"id":"a58c4ce7-e2c3-436f-a30a-7eda42ddd096","name":"numero","value":"={{ $json.query.numero}}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-704,-960],"id":"9621866f-d36c-43b2-a23f-e1786d76e018","name":"Edit Fields8"},{"parameters":{"jsCode":" return items.map(item => {\n  const dados = item.json;\n  return {\n    json: {\n      numero: dados.id,\n      nome: dados.nome,\n      descricao: dados.descricao,\n      categoria: dados.categoria,\n      preco_pequena: dados.tamanhos?.find(t => t.nome === 'P')?.preco || 0,\n      preco_medio: dados.tamanhos?.find(t => t.nome === 'M')?.preco || dados.preco_medio || 0,\n      preco_grande: dados.tamanhos?.find(t => t.nome === 'G')?.preco || dados.preco_grande || 0,\n      imagem: dados.imagem || null\n    }\n  };\n});\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[1056,-736],"id":"5a7bf9ff-c4b4-482b-8093-f125dbd31cdd","name":"cardapio2"},{"parameters":{"httpMethod":"POST","path":"update_item_cardapio","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2.1,"position":[-128,-1008],"id":"6cfec05e-7976-4b87-bcc7-0e04c1a2ebc9","name":"UpdateCardapio","webhookId":"4bb058e1-a5fa-4abd-aa6c-4ab48b1afed1"},{"parameters":{"path":"get_item_cardapio","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2.1,"position":[-464,-704],"id":"ffe9c217-837c-436e-bc55-a4c2103ccc2d","name":"GetItemCardapio","webhookId":"4bb058e1-a5fa-4abd-aa6c-4ab48b1afed1"},{"parameters":{"path":"cardapio","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2.1,"position":[-336,-384],"id":"18635f82-e122-4fef-9ad5-3a2e3ca4fe23","name":"Cardapio3","webhookId":"4bb058e1-a5fa-4abd-aa6c-4ab48b1afed1"},{"parameters":{"httpMethod":"POST","path":"login","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2.1,"position":[-352,-64],"id":"78b1ca84-c855-4ce7-8c9a-2a4982b441ce","name":"Login","webhookId":"77c2764f-3d24-48db-aef2-07b64e9ecdeb"},{"parameters":{"path":"pedidos","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2.1,"position":[-368,256],"id":"fe239da1-48d7-405d-be7c-d9870d69faad","name":"Pedidos","webhookId":"77c2764f-3d24-48db-aef2-07b64e9ecdeb"},{"parameters":{"path":"pedido_detalhado","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2.1,"position":[-368,512],"id":"6df9b7db-fbd3-4bdd-8a59-a9d76fa0ebda","name":"Pedidos Html","webhookId":"77c2764f-3d24-48db-aef2-07b64e9ecdeb"},{"parameters":{"httpMethod":"POST","path":"cancelar","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2.1,"position":[-336,1120],"id":"d4d4f613-59d7-46bc-87ff-737f609c448e","name":"CancelarPedido","webhookId":"77c2764f-3d24-48db-aef2-07b64e9ecdeb"},{"parameters":{"httpMethod":"POST","path":"avancar","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2.1,"position":[-288,832],"id":"18e0fe00-0ba1-4455-8612-82bdbdbfc33f","name":"WebhookAvancaPedido","webhookId":"77c2764f-3d24-48db-aef2-07b64e9ecdeb"},{"parameters":{"respondWith":"allIncomingItems","options":{"responseCode":200}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.4,"position":[336,1456],"id":"92d47af8-bd35-437d-80cd-111bd136a4a2","name":"Respond to Webhook8"},{"parameters":{"operation":"executeQuery","query":"   SELECT\n   *\nFROM public.pedidos AS p\n  where    p.id_empresa =  {{ $json.id_empresa }} and p.pedido_id =  {{ $json.pedido_id }}","options":{}},"type":"n8n-nodes-base.postgres","typeVersion":2.6,"position":[144,1456],"id":"139fd4b4-3fec-4d3f-8a78-c09f08b1d108","name":"GetPedido1","credentials":{"postgres":{"id":"3NLaVyXonSrCcLE3","name":"Postgres account"}}},{"parameters":{"path":"pedido_detalhe","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2.1,"position":[-288,1456],"id":"e488b507-7e29-434b-8189-172a221f0846","name":"WebhooPedidoDetalhes","webhookId":"77c2764f-3d24-48db-aef2-07b64e9ecdeb"},{"parameters":{"assignments":{"assignments":[{"id":"4616a119-9b3f-4dcd-b548-0be8d5f7a3b4","name":"id_empresa","value":"={{ $json.query.id_empresa}}","type":"number"},{"id":"1b6a866e-2983-4b2b-8dbc-787efa60213b","name":"pedido_id","value":"={{ $json.query.numero }}","type":"number"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-64,1456],"id":"4ad00ab4-6217-4ce4-8a4b-f43339595e70","name":"Pedido"},{"parameters":{"assignments":{"assignments":[{"id":"4616a119-9b3f-4dcd-b548-0be8d5f7a3b4","name":"id_empresa","value":"=2","type":"number"},{"id":"d264adb3-bdb2-4f88-9c46-ad41b33dead9","name":"id_pedido","value":21,"type":"number"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-864,384],"id":"305e379e-ae8f-4ef3-94d6-a1ed3377db49","name":"Edit Fields6"},{"parameters":{"assignments":{"assignments":[{"id":"807e4143-d55c-420c-b026-90bb242e057f","name":"pedido_id","value":"={{ $json.query.numero}}","type":"string"},{"id":"4616a119-9b3f-4dcd-b548-0be8d5f7a3b4","name":"id_empresa","value":"={{ $json.query.id_empresa}}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-128,512],"id":"36e13954-f3cc-4a07-84cb-11feb7200959","name":"Edit Fields10"},{"parameters":{"respondWith":"allIncomingItems","options":{"responseCode":200}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.4,"position":[288,1696],"id":"f8e83d8f-6eba-4428-bf19-ef50504b7ed9","name":"Respond to Webhook9"},{"parameters":{"path":"modelos_custo","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2.1,"position":[-368,1696],"id":"4f820fd6-ba53-42f4-804f-c9c7a0ee707b","name":"Modelo","webhookId":"77c2764f-3d24-48db-aef2-07b64e9ecdeb"},{"parameters":{"assignments":{"assignments":[{"id":"4616a119-9b3f-4dcd-b548-0be8d5f7a3b4","name":"id_empresa","value":"={{ $json.query.id_empresa}}","type":"number"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-144,1696],"id":"3d4e9a2a-5067-4566-96b5-9e66fddec331","name":"Edit Fields12"},{"parameters":{"operation":"executeQuery","query":" select * from pizza_modelo where id_empresa =   {{ $json.id_empresa }}","options":{}},"type":"n8n-nodes-base.postgres","typeVersion":2.6,"position":[64,1696],"id":"d37bee79-4f7b-4874-9392-526aaf0f248e","name":"modelo","credentials":{"postgres":{"id":"3NLaVyXonSrCcLE3","name":"Postgres account"}}},{"parameters":{"respondWith":"allIncomingItems","options":{"responseCode":200}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.4,"position":[304,2080],"id":"2e83213f-a771-4ef3-ad29-3a5b5e30b47e","name":"Respond to Webhook10"},{"parameters":{"assignments":{"assignments":[{"id":"4616a119-9b3f-4dcd-b548-0be8d5f7a3b4","name":"id_empresa","value":"=2","type":"number"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-928,1904],"id":"54640e07-771e-4ebe-8e08-bc915f417f14","name":"Edit Fields13","disabled":true},{"parameters":{"assignments":{"assignments":[{"id":"4616a119-9b3f-4dcd-b548-0be8d5f7a3b4","name":"id_empresa","value":"={{ $json.query.id_empresa}}","type":"number"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-128,2080],"id":"dbf1603f-96fb-4661-8b09-e2a0db6e87b8","name":"Edit Fields14"},{"parameters":{"path":"relatorios","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2.1,"position":[-336,2080],"id":"6ccd59d5-ad73-4d6c-b971-18821777c66c","name":"relatorios","webhookId":"77c2764f-3d24-48db-aef2-07b64e9ecdeb"},{"parameters":{"operation":"executeQuery","query":" select * from  relatorio_link  where id_empresa =   {{ $json.id_empresa }}","options":{}},"type":"n8n-nodes-base.postgres","typeVersion":2.6,"position":[80,2080],"id":"ee62e652-08c3-4cbc-af3e-b6040c1b94c0","name":"relatorios1","credentials":{"postgres":{"id":"3NLaVyXonSrCcLE3","name":"Postgres account"}}},{"parameters":{"respondWith":"allIncomingItems","options":{"responseCode":200}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.4,"position":[304,2336],"id":"c551f387-48f4-42a8-8e5b-29bc676eeb83","name":"Respond to Webhook11"},{"parameters":{"assignments":{"assignments":[{"id":"4616a119-9b3f-4dcd-b548-0be8d5f7a3b4","name":"id_empresa","value":"={{ $json.query.id_empresa}}","type":"number"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-128,2336],"id":"30c84adc-90f4-4d4d-b3b5-1aa31efb7e8a","name":"Edit Fields15"},{"parameters":{"path":"kpi_termometro_dia","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2.1,"position":[-336,2336],"id":"2e0326e1-093b-448e-9c69-11f5143cce0f","name":"kpi_termometro_dia","webhookId":"77c2764f-3d24-48db-aef2-07b64e9ecdeb"},{"parameters":{"operation":"executeQuery","query":"   \nSELECT public.kpi_termometro_dia(  {{ $json.id_empresa }}) ","options":{}},"type":"n8n-nodes-base.postgres","typeVersion":2.6,"position":[80,2336],"id":"59ba5aed-9da8-4dfc-ac4b-ec3498469ef6","name":"kpi_termometro_dia1","credentials":{"postgres":{"id":"3NLaVyXonSrCcLE3","name":"Postgres account"}}},{"parameters":{"respondWith":"allIncomingItems","options":{"responseCode":200}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.4,"position":[240,2592],"id":"e883dccc-52bd-4d97-8016-ca3b44824369","name":"Respond to Webhook12"},{"parameters":{"assignments":{"assignments":[{"id":"807e4143-d55c-420c-b026-90bb242e057f","name":"pedido_id","value":"=55","type":"string"},{"id":"4616a119-9b3f-4dcd-b548-0be8d5f7a3b4","name":"id_empresa","value":"=1","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-64,2896],"id":"debb118a-65f7-49ad-963d-ae06f8289366","name":"Edit Fields11"},{"parameters":{"path":"visualizarcozinha","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2.1,"position":[-400,2592],"id":"448e1e32-d85d-457d-918a-138796c0c26d","name":"Cozinha","webhookId":"77c2764f-3d24-48db-aef2-07b64e9ecdeb"},{"parameters":{"operation":"executeQuery","query":" select * from visualizarcozinha  (  {{ $json.id_empresa }}, {{ $json.pedido_id }})\n\n\n ","options":{}},"type":"n8n-nodes-base.postgres","typeVersion":2.6,"position":[64,2592],"id":"f0520f79-e611-4538-94b2-c7a1bfbfc9f5","name":"PedidoCozinha","alwaysOutputData":true,"credentials":{"postgres":{"id":"3NLaVyXonSrCcLE3","name":"Postgres account"}}},{"parameters":{"assignments":{"assignments":[{"id":"807e4143-d55c-420c-b026-90bb242e057f","name":"pedido_id","value":"={{ $json.query.numero}}","type":"string"},{"id":"4616a119-9b3f-4dcd-b548-0be8d5f7a3b4","name":"id_empresa","value":"={{ $json.query.id_empresa}}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-160,2592],"id":"0c11c23d-42a6-4773-af9e-69226bfbf20b","name":"Edit Fields16"}],"connections":{"If":{"main":[[{"node":"Sim","type":"main","index":0}],[{"node":"Não","type":"main","index":0}]]},"Sim":{"main":[[{"node":"Merge","type":"main","index":0}]]},"Não":{"main":[[{"node":"Merge","type":"main","index":1}]]},"Merge":{"main":[[{"node":"DadosEmpresa","type":"main","index":0}]]},"Edit Fields1":{"main":[[]]},"Switch1":{"main":[[{"node":"Edit Fields3","type":"main","index":0}],[{"node":"Edit Fields4","type":"main","index":0}],[{"node":"Edit Fields2","type":"main","index":0}]]},"Edit Fields2":{"main":[[{"node":"Merge2","type":"main","index":2}]]},"Edit Fields3":{"main":[[{"node":"Merge2","type":"main","index":0}]]},"Edit Fields4":{"main":[[{"node":"Merge2","type":"main","index":1}]]},"Merge2":{"main":[[{"node":"Avanca","type":"main","index":0}]]},"GetPedido":{"main":[[{"node":"Respond to Webhook1","type":"main","index":0}]]},"Resumo_Endereco":{"main":[[{"node":"Respond to Webhook3","type":"main","index":0}]]},"PendidoAvancar2":{"main":[[{"node":"Switch1","type":"main","index":0}]]},"CancelaPedido":{"main":[[{"node":"Respond to Webhook5","type":"main","index":0}]]},"Avanca":{"main":[[{"node":"Respond to Webhook4","type":"main","index":0}]]},"Usuario":{"main":[[{"node":"DadosUsuario","type":"main","index":0}]]},"DadosUsuario":{"main":[[{"node":"If","type":"main","index":0}]]},"DadosEmpresa":{"main":[[{"node":"Respond to Webhook","type":"main","index":0}]]},"Edit Fields":{"main":[[{"node":"GetPedido","type":"main","index":0}]]},"cardapio3":{"main":[[{"node":"Respond to Webhook2","type":"main","index":0}]]},"Cardapio":{"main":[[{"node":"cardapio3","type":"main","index":0}]]},"Edit Fields5":{"main":[[{"node":"Cardapio","type":"main","index":0}]]},"cardapio":{"main":[[{"node":"Respond to Webhook6","type":"main","index":0}]]},"Cardapio1":{"main":[[{"node":"cardapio","type":"main","index":0}]]},"Edit Fields7":{"main":[[{"node":"Cardapio1","type":"main","index":0}]]},"cardapio1":{"main":[[{"node":"Respond to Webhook7","type":"main","index":0}]]},"Cardapio2":{"main":[[{"node":"cardapio1","type":"main","index":0}]]},"Edit Fields8":{"main":[[]]},"UpdateCardapio":{"main":[[{"node":"Cardapio2","type":"main","index":0}]]},"GetItemCardapio":{"main":[[{"node":"Edit Fields7","type":"main","index":0}]]},"Cardapio3":{"main":[[{"node":"Edit Fields5","type":"main","index":0}]]},"Login":{"main":[[{"node":"Usuario","type":"main","index":0}]]},"Pedidos":{"main":[[{"node":"Edit Fields","type":"main","index":0}]]},"Pedidos Html":{"main":[[{"node":"Edit Fields10","type":"main","index":0}]]},"CancelarPedido":{"main":[[{"node":"CancelaPedido","type":"main","index":0}]]},"WebhookAvancaPedido":{"main":[[{"node":"PendidoAvancar2","type":"main","index":0}]]},"GetPedido1":{"main":[[{"node":"Respond to Webhook8","type":"main","index":0}]]},"WebhooPedidoDetalhes":{"main":[[{"node":"Pedido","type":"main","index":0}]]},"Pedido":{"main":[[{"node":"GetPedido1","type":"main","index":0}]]},"Edit Fields6":{"main":[[]]},"Edit Fields10":{"main":[[{"node":"Resumo_Endereco","type":"main","index":0}]]},"Modelo":{"main":[[{"node":"Edit Fields12","type":"main","index":0}]]},"Edit Fields12":{"main":[[{"node":"modelo","type":"main","index":0}]]},"modelo":{"main":[[{"node":"Respond to Webhook9","type":"main","index":0}]]},"Edit Fields13":{"main":[[]]},"Edit Fields14":{"main":[[{"node":"relatorios1","type":"main","index":0}]]},"relatorios":{"main":[[{"node":"Edit Fields14","type":"main","index":0}]]},"relatorios1":{"main":[[{"node":"Respond to Webhook10","type":"main","index":0}]]},"Edit Fields15":{"main":[[{"node":"kpi_termometro_dia1","type":"main","index":0}]]},"kpi_termometro_dia":{"main":[[{"node":"Edit Fields15","type":"main","index":0}]]},"kpi_termometro_dia1":{"main":[[{"node":"Respond to Webhook11","type":"main","index":0}]]},"Edit Fields11":{"main":[[]]},"Cozinha":{"main":[[{"node":"Edit Fields16","type":"main","index":0}]]},"PedidoCozinha":{"main":[[{"node":"Respond to Webhook12","type":"main","index":0}]]},"Edit Fields16":{"main":[[{"node":"PedidoCozinha","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"0bbfd8bc-0117-4e37-9302-86f6bf0b7b74","triggerCount":13,"shared":[{"createdAt":"2025-09-07T01:22:25.461Z","updatedAt":"2025-09-07T01:22:25.461Z","role":"workflow:owner","workflowId":"01zCvIsWPAFFMGcr","projectId":"wFRMrac2003Pl1x6"}],"tags":[]}