{"createdAt":"2025-11-14T13:44:03.237Z","updatedAt":"2025-11-14T13:45:46.720Z","id":"T4pj7MtMr2OjF4TC","name":"FinanceFlow","active":false,"isArchived":false,"nodes":[{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"059b3d30-905f-4038-b8c1-9582bae19867","leftValue":"={{ $json.user_id }}","rightValue":"","operator":{"type":"number","operation":"exists","singleValue":true}},{"id":"91d4813d-55f8-40af-a588-cc77a7b30153","leftValue":"={{ $('Usuario').item.json.password }}","rightValue":"={{ $json.senha }}","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[-592,32],"id":"6548b41b-f33e-4d6b-bcaa-77ae28638468","name":"If"},{"parameters":{"jsCode":"return [{ json: { success: true, message: 'usuario ok' } }];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-336,-96],"id":"85f31141-2077-47bb-b687-005749d06f40","name":"Sim"},{"parameters":{"jsCode":"  return [{ json: { success: false, message: 'usuario invalido' } }];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-352,176],"id":"2c63ab82-c47c-41e5-8962-1a107bb04307","name":"Não"},{"parameters":{},"type":"n8n-nodes-base.merge","typeVersion":3.2,"position":[-128,0],"id":"26d1c158-3789-4c65-9340-16a73d65bdbb","name":"Merge"},{"parameters":{"options":{"responseCode":200}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.4,"position":[416,0],"id":"fb38b6e4-5d87-47e2-8260-dd2c7e2533de","name":"Respond to Webhook"},{"parameters":{"assignments":{"assignments":[{"id":"807e4143-d55c-420c-b026-90bb242e057f","name":"email","value":"={{ $json.body.email }}","type":"string"},{"id":"f3078e1c-88ef-46e0-8681-76c60898ac50","name":"password","value":"={{ $json.body.password }}","type":"string"},{"id":"f936a6e8-77e3-46f8-a272-cd2b884e2dfd","name":"empresa_id","value":"1","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-1104,32],"id":"631d34d7-9ebc-47f6-9e26-fac7811d8500","name":"Usuario"},{"parameters":{"operation":"get","tableId":"usuario","filters":{"conditions":[{"keyName":"email","keyValue":"={{$json.email}}"},{"keyName":"senha","keyValue":"={{ $json.password }}"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[-864,32],"id":"0cb67287-1360-4974-8db4-68de7890b4d0","name":"DadosUsuario","credentials":{"supabaseApi":{"id":"CcvRddDPb5xelxfb","name":"Supabase account"}}},{"parameters":{"operation":"executeQuery","query":"SELECT \n  u.user_id,\n  u.email,\n  e.id_empresa AS id_empresa,\n  e.nome AS nome_empresa,\n  e.saudacao, cnpj,\n  u.tipo_admim tipo_admin\nFROM usuario u\nJOIN empresas e ON e.id_empresa = u.id_empresa\nWHERE u.email = '{{ $('DadosUsuario').item.json.email }}' AND u.senha = '{{ $('DadosUsuario').item.json.senha }}';","options":{}},"type":"n8n-nodes-base.postgres","typeVersion":2.6,"position":[144,0],"id":"31489549-8600-4a62-8f0a-475a52412880","name":"DadosEmpresa","credentials":{"postgres":{"id":"3NLaVyXonSrCcLE3","name":"Postgres account"}}},{"parameters":{"httpMethod":"POST","path":"login","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2.1,"position":[-1328,32],"id":"da52827b-57f2-466b-8362-450eb8073d08","name":"Login","webhookId":"77c2764f-3d24-48db-aef2-07b64e9ecdeb"}],"connections":{"If":{"main":[[{"node":"Sim","type":"main","index":0}],[{"node":"Não","type":"main","index":0}]]},"Sim":{"main":[[{"node":"Merge","type":"main","index":0}]]},"Não":{"main":[[{"node":"Merge","type":"main","index":1}]]},"Merge":{"main":[[{"node":"DadosEmpresa","type":"main","index":0}]]},"Usuario":{"main":[[{"node":"DadosUsuario","type":"main","index":0}]]},"DadosUsuario":{"main":[[{"node":"If","type":"main","index":0}]]},"DadosEmpresa":{"main":[[{"node":"Respond to Webhook","type":"main","index":0}]]},"Login":{"main":[[{"node":"Usuario","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":{},"versionId":"df00887e-5a70-461f-ab05-7922bf65f039","triggerCount":0,"shared":[{"createdAt":"2025-11-14T13:44:03.237Z","updatedAt":"2025-11-14T13:44:03.237Z","role":"workflow:owner","workflowId":"T4pj7MtMr2OjF4TC","projectId":"wFRMrac2003Pl1x6"}],"tags":[]}